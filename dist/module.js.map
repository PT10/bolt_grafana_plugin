
{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../node_modules/tslib/tslib.es6.js","webpack:///./datasource.ts","webpack:///./datasourceUtils.ts","webpack:///./module.tsx","webpack:///./queryEditor.tsx","webpack:///external \"@grafana/runtime\"","webpack:///external \"@grafana/ui\"","webpack:///external \"lodash\"","webpack:///external \"react\""],"names":[],"mappings":"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","file":"module.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./module.tsx\");\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/*\n *\n *  Copyright (C) 2019 Bolt Analytics Corporation\n *\n *      Licensed under the Apache License, Version 2.0 (the \"License\");\n *      you may not use this file except in compliance with the License.\n *      You may obtain a copy of the License at\n *\n *          http://www.apache.org/licenses/LICENSE-2.0\n *\n *      Unless required by applicable law or agreed to in writing, software\n *      distributed under the License is distributed on an \"AS IS\" BASIS,\n *      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *      See the License for the specific language governing permissions and\n *      limitations under the License.\n *\n */\n\nimport { DataQueryRequest, DataSourceApi, DataSourceInstanceSettings } from '@grafana/ui';\nimport { DataFrame } from '@grafana/data';\nimport { BoltQuery, BoltOptions } from './types';\nimport { getBackendSrv } from '@grafana/runtime';\nimport { Utils } from 'datasourceUtils';\n\nimport _ from 'lodash';\n\nexport class BoltDatasource extends DataSourceApi<BoltQuery, BoltOptions> {\n  data: DataFrame[] = [];\n  baseUrl: any = '';\n  anCollection = '';\n  rawCollection = '';\n  rawCollectionType = 'single';\n  timestampField = 'timestamp';\n  rawCollectionWindow = 1;\n  backendSrv: any;\n  qTemp: any;\n  $q: any;\n  templateSrv: any;\n\n  totalCount?: number = undefined;\n\n  facets: any = {\n    aggAnomaly:\n      '{\"heatMapFacet\":{\"numBuckets\":true,\"offset\":0,\"limit\":10000,\"type\":\"terms\",\"field\":\"jobId\",\"facet\":{\"Day0\":{\"type\":\"range\",' +\n      '\"field\":\"timestamp\",\"start\":\"__START_TIME__\",\"end\":\"__END_TIME__\",\"gap\":\"+1HOUR\",\"facet\":{\"score\":{\"type\":\"query\",\"q\":\"*:*\",' +\n      '\"facet\":{\"score\":\"max(score_value)\"}}}}}}}',\n    indvAnomaly:\n      '{\"lineChartFacet\":{\"numBuckets\":true,\"offset\":0,\"limit\":10,\"type\":\"terms\",\"field\":\"jobId\",\"facet\":{\"group\":{\"numBuckets\":true,' +\n      '\"offset\":0,\"limit\":10,\"type\":\"terms\",\"field\":\"partition_fields\",\"sort\":\"s desc\",\"ss\":\"sum(s)\",\"facet\":{\"s\":\"sum(score_value)\",' +\n      '\"timestamp\":{\"type\":\"terms\",\"limit\":-1,\"field\":\"timestamp\",\"sort\":\"index\",\"facet\":{\"actual\":{\"type\":\"terms\",\"field\":\"actual_value\"}, ' +\n      '\"score\":{\"type\":\"terms\",\"field\":\"score_value\"},\"anomaly\":{\"type\":\"terms\",\"field\":\"is_anomaly\"},' +\n      '\"expected\":{\"type\":\"terms\",\"field\":\"expected_value\"}}}}}}}}',\n    correlation:\n      '{\"correlation\":{\"numBuckets\":true,\"offset\":0,\"limit\":10,\"type\":\"terms\",\"field\":\"jobId\",\"facet\":{\"group\":{\"numBuckets\":true,' +\n      '\"offset\":0,\"limit\":10,\"type\":\"terms\",\"field\":\"partition_fields\",\"sort\":\"s desc\",\"ss\":\"sum(s)\",\"facet\":{\"s\":\"sum(score_value)\",' +\n      '\"timestamp\":{\"type\":\"terms\",\"limit\":-1,\"field\":\"timestamp\",\"sort\":\"index\",\"facet\":{\"actual\":{\"type\":\"terms\",\"field\":\"actual_value\"}}}}}}}}',\n  };\n\n  constructor(instanceSettings: DataSourceInstanceSettings<BoltOptions>, $q: any, templateSrv: any) {\n    super(instanceSettings);\n\n    this.$q = $q;\n    this.templateSrv = templateSrv;\n\n    this.baseUrl = instanceSettings.url;\n    if (this.baseUrl.endsWith('/')) {\n      this.baseUrl += 'solr'; //this.baseUrl.substr(0, this.baseUrl.length - 1);\n    } else {\n      this.baseUrl += '/solr';\n    }\n\n    if (instanceSettings.jsonData) {\n      this.anCollection = instanceSettings.jsonData.anCollection;\n      this.rawCollection = instanceSettings.jsonData.rawCollection;\n      this.timestampField = instanceSettings.jsonData.timestampField;\n      this.rawCollectionType = instanceSettings.jsonData.rawCollectionType;\n      this.rawCollectionWindow = instanceSettings.jsonData.rawCollectionWindow;\n    }\n\n    this.backendSrv = getBackendSrv();\n  }\n\n  metricFindQuery(query: string) {\n    if (!query || query.length === 0) {\n      return Promise.resolve([]);\n    }\n\n    const pattern1 = /^getPageCount\\(\\$(.*),\\s*\\$(.*)\\)$/;\n    const pattern2 = /^(.*)\\((.*)\\)$/;\n\n    const matches1: any = query.match(pattern1);\n    const matches2: any = query.match(pattern2);\n\n    if (matches1 && matches1.length === 3) {\n      return this.getTotalCount(matches1);\n    } else if (matches2 && matches2.length === 3) {\n      return this.getFields(matches2);\n    } else {\n      return Promise.reject({\n        status: 'error',\n        message: 'Supported options are: <collection_name>(<field_name>) and getPageCount($PageSize, $Search)',\n        title: 'Error while adding the variable',\n      });\n    }\n  }\n\n  query(options: DataQueryRequest<BoltQuery>): any {\n    const targetPromises = options.targets\n      .map((query: BoltQuery) => {\n        // If user has added page number variable the count is computed in template init (metricFindQuery) No need to fire the Query on solr again\n        if (query.queryType === 'count' && this.totalCount) {\n          return Promise.resolve([\n            {\n              data: [\n                {\n                  target: 'Number of docs',\n                  datapoints: [[this.totalCount, '']],\n                },\n              ],\n            },\n          ]);\n        }\n\n        const collection = _.keys(this.facets).includes(query.queryType) ? this.anCollection : query.collection;\n        if (!query.query) {\n          return Promise.resolve([]);\n        }\n        const q = Utils.queryBuilder(this.templateSrv.replace(query.query, options.scopedVars));\n        let start = this.templateSrv.replace(query.start, options.scopedVars);\n        let numRows = this.templateSrv.replace(query.numRows.toString(), options.scopedVars) || 100;\n\n        if (query.queryType === 'chart') {\n          numRows = 1000; // Cursor page size\n        } else {\n          numRows = ['count', 'facet'].includes(query.queryType) ? 0 : numRows;\n        }\n\n        const startTime = options.range.from.toISOString();\n        const endTime = options.range.to.toISOString();\n\n        numRows = Number(numRows);\n        start = numRows * Number(start);\n        // Add basic query fields\n        const solrQuery: any = {\n          fq: this.timestampField + ':[' + startTime + ' TO ' + endTime + ']',\n          q: q,\n          fl: this.timestampField + (query.fl ? ',' + query.fl : ''),\n          rows: numRows,\n          start: start,\n        };\n\n        // Add fields specific to raw logs and single stat on raw logs\n        if (query.queryType === 'rawlogs' || query.queryType === 'count' || query.queryType === 'slowQueries') {\n          solrQuery['collectionWindow'] = this.rawCollectionWindow;\n          solrQuery['startTime'] = startTime;\n          solrQuery['endTime'] = endTime;\n          solrQuery['getRawMessages'] = true;\n        }\n\n        if (query.queryType === 'slowQueries') {\n          solrQuery['rex.message.q'] = query.rexQuery;\n          solrQuery['rex.message.outputfields'] = query.rexOutFields;\n        }\n\n        // Set facet fields for heatmap, linechart and count (only in case of multi collection mode due to plugin numFound limitation)\n        // TODO: Find out why numFounf is returned only after specifying the facet\n        if (query.queryType === 'count' && this.rawCollectionType === 'multi') {\n          solrQuery['facet'] = true;\n          solrQuery['facet.field'] = 'id';\n          solrQuery['facet.limit'] = 2;\n        } else if (_.keys(this.facets).includes(query.queryType)) {\n          solrQuery['facet'] = true;\n          solrQuery['json.facet'] = this.facets[query.queryType].replace('__START_TIME__', startTime).replace('__END_TIME__', endTime);\n        } else {\n          delete solrQuery['facet'];\n          delete solrQuery['json.facet'];\n        }\n\n        // for cursor to work. Will sort by ts later\n        if (query.queryType === 'chart') {\n          solrQuery['sort'] = 'id asc';\n        } else if (query.sortField) {\n          solrQuery['sort'] =\n            this.templateSrv.replace(query.sortField, options.scopedVars) + ' ' + this.templateSrv.replace(query.sortOrder, options.scopedVars);\n        }\n\n        const params = {\n          url: this.baseUrl + '/' + collection + '/select?wt=json',\n          method: 'GET',\n          params: solrQuery,\n        };\n\n        const cursor = query.queryType === 'chart' ? '*' : null;\n\n        return this.sendQueryRequest([], params, query, cursor); // cursor mark or charts\n      })\n      .values();\n\n    const series: any = {};\n    const resultSeries: any[] = [];\n\n    return Promise.all(targetPromises).then(responses => {\n      responses.forEach(resp => {\n        resp.forEach((r: any) => {\n          r.data.forEach((s: any) => {\n            if (s.type === 'table') {\n              resultSeries.push(s);\n            } else {\n              series[s.target] = !series[s.target] ? s.datapoints : series[s.target].concat(s.datapoints);\n            }\n          });\n        });\n      });\n      /*\n      const result = {\n        data: responses.map(response => {\n          return response\n        }),\n      };\n\n      result.data = _.flatten(result.data);*/\n\n      _.keys(series).forEach(key => {\n        resultSeries.push({\n          target: key,\n          datapoints: series[key].sort((a: any, b: any) => {\n            return a[1] - b[1];\n          }),\n        });\n      });\n\n      const result = {\n        data: resultSeries,\n      };\n\n      return result;\n    });\n  }\n\n  testDatasource() {\n    const options = {\n      url: this.baseUrl + '/' + this.anCollection + '/select?wt=json',\n      method: 'GET',\n    };\n    return this.backendSrv\n      .datasourceRequest(options)\n      .then((response: any) => {\n        if (response.status === 200) {\n          return {\n            status: 'success',\n            message: 'Data source is working',\n            title: 'Success',\n          };\n        } else {\n          return {\n            status: 'error',\n            message: 'Data source is NOT working',\n            title: 'Error',\n          };\n        }\n      })\n      .catch((error: any) => {\n        return {\n          status: 'error',\n          message: error.status + ': ' + error.statusText,\n          title: 'Error',\n        };\n      });\n  }\n\n  sendQueryRequest(respArr: any[], params: any, query: BoltQuery, cursor?: any) {\n    if (cursor) {\n      params.params['cursorMark'] = cursor;\n    }\n    return this.backendSrv\n      .datasourceRequest(params)\n      .then((response: any) => {\n        if (response.status === 200) {\n          const processedData = Utils.processResponse(response, query.queryType, this.timestampField, query.baseMetric);\n          respArr.push(processedData);\n\n          if (cursor && response.data.nextCursorMark && cursor !== response.data.nextCursorMark) {\n            return this.sendQueryRequest(respArr, params, query, response.data.nextCursorMark);\n          } else {\n            return respArr;\n          }\n        } else {\n          return Promise.reject([\n            {\n              status: 'error',\n              message: 'Error',\n              title: 'Error',\n            },\n          ]);\n        }\n      })\n      .catch((error: any) => {\n        return Promise.reject([\n          {\n            status: 'error',\n            message: error.status + ': ' + error.statusText,\n            title: 'Error while accessing data',\n          },\n        ]);\n      });\n  }\n\n  getFields(matches: any) {\n    const collection = matches[1];\n    const field = matches[2];\n\n    const url = this.baseUrl + '/' + collection + '/select?q=*:*&facet=true&facet.field=' + field + '&wt=json&rows=0';\n    const params = {\n      url: url,\n      method: 'GET',\n    };\n    return this.backendSrv.datasourceRequest(params).then((response: any) => {\n      if (response.status === 200) {\n        return Utils.mapToTextValue(response);\n      } else {\n        return Promise.reject([\n          {\n            status: 'error',\n            message: 'Error',\n            title: 'Error',\n          },\n        ]);\n      }\n    });\n  }\n\n  getTotalCount(matches: any) {\n    const pageSizeVar = matches[1];\n    const searchVar = matches[2];\n\n    const searchQuery = this.templateSrv.variables.find((v: any) => v.name === searchVar);\n    if (!searchQuery) {\n      this.totalCount = undefined;\n      return Promise.reject({\n        status: 'error',\n        message: '$' + searchVar + ' not found in variables',\n        title: 'Error while adding the variable',\n      });\n    }\n\n    const pageSize = this.templateSrv.variables.find((v: any) => v.name === pageSizeVar);\n    if (!pageSize) {\n      this.totalCount = undefined;\n      return Promise.reject({\n        status: 'error',\n        message: '$' + pageSizeVar + ' not found in variables',\n        title: 'Error while adding the variable',\n      });\n    }\n\n    const params = {\n      q: searchQuery.query,\n      rows: 0,\n      fq: 'timestamp:[' + this.templateSrv.timeRange.from.toJSON() + ' TO ' + this.templateSrv.timeRange.to.toJSON() + ']',\n      getRawMessages: true,\n      startTime: this.templateSrv.timeRange.from.toJSON(),\n      endTime: this.templateSrv.timeRange.to.toJSON(),\n      facet: true,\n      'facet.field': 'id',\n      'facet.limit': 2,\n    };\n\n    const options = {\n      url: this.baseUrl + '/' + this.rawCollection + '/select?wt=josn',\n      method: 'GET',\n      params: params,\n    };\n\n    return this.backendSrv.datasourceRequest(options).then((data: any) => {\n      let arr: any[] = [];\n\n      this.totalCount = data.data.response.numFound;\n      if (data && data.data && data.data.response) {\n        for (let i = 0; i < Math.round(data.data.response.numFound / Number(pageSize.query)); i++) {\n          arr.push(i);\n        }\n      }\n      arr = arr.map(ele => {\n        return {\n          text: ele + 1,\n          value: ele,\n        };\n      });\n      const firstNResults = arr.slice(0, 10);\n      const lastNResults = arr.splice(arr.length - 11, arr.length - 1);\n\n      if (firstNResults.length === 0 && lastNResults.length === 0) {\n        return [\n          {\n            text: 0,\n            value: 0,\n          },\n        ];\n      }\n\n      return firstNResults.concat(lastNResults);\n    });\n  }\n}\n\nexport default BoltDatasource;\n","/*\n *\n *  Copyright (C) 2019 Bolt Analytics Corporation\n *\n *      Licensed under the Apache License, Version 2.0 (the \"License\");\n *      you may not use this file except in compliance with the License.\n *      You may obtain a copy of the License at\n *\n *          http://www.apache.org/licenses/LICENSE-2.0\n *\n *      Unless required by applicable law or agreed to in writing, software\n *      distributed under the License is distributed on an \"AS IS\" BASIS,\n *      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *      See the License for the specific language governing permissions and\n *      limitations under the License.\n *\n */\n\nexport class Utils {\n  static processResponse(response: any, format: any, timeField: string, correlationMetric?: string) {\n    const data = response.data;\n    let seriesList: any;\n    const series: any = {};\n\n    // Process line chart facet response\n    if (data.facets && data.facets.lineChartFacet) {\n      seriesList = [];\n      const jobs = data.facets.lineChartFacet.buckets;\n      jobs.forEach((job: any) => {\n        //const jobId = job.val;\n        const partFields = job.group.buckets;\n        partFields.forEach((partField: any) => {\n          const partFieldJson = JSON.parse(partField.val);\n          const jobIdWithPartField = /*jobId + '_' + */ partFieldJson.aggr_field;\n          const buckets = partField.timestamp.buckets;\n          const actualSeries: any[] = [];\n          const expectedSeries: any[] = [];\n          const scoreSeries: any[] = [];\n          const anomalySeries: any[] = [];\n          buckets.forEach((timeBucket: any) => {\n            const d: Date = new Date(timeBucket.val);\n            const ts = d.getTime();\n            const actual = timeBucket.actual.buckets[0].val;\n            const expected = timeBucket.expected.buckets[0].val;\n            let score = timeBucket.score.buckets[0].val;\n            let anomaly = timeBucket.anomaly.buckets[0].val;\n            if (score >= 1 && anomaly) {\n              anomaly = actual;\n            } else {\n              anomaly = null;\n              score = null;\n            }\n            actualSeries.push([actual, ts]);\n            scoreSeries.push([score, ts]);\n            anomalySeries.push([anomaly, ts]);\n            expectedSeries.push([expected, ts]);\n          });\n\n          seriesList.push({\n            target: jobIdWithPartField + ' actual',\n            datapoints: actualSeries,\n          });\n          seriesList.push({\n            target: jobIdWithPartField + ' score',\n            datapoints: scoreSeries,\n          });\n          seriesList.push({\n            target: jobIdWithPartField + ' anomaly',\n            datapoints: anomalySeries,\n          });\n          seriesList.push({\n            target: jobIdWithPartField + ' expected',\n            datapoints: expectedSeries,\n          });\n        });\n      });\n    } else if (data.facets && data.facets.correlation) {\n      seriesList = [];\n      const jobs = data.facets.correlation.buckets;\n\n      let baseline: number[] = [];\n      // Find baseline series and populate base metric\n      jobs.forEach((job: any) => {\n        if (job.val === correlationMetric) {\n          const partFields = job.group.buckets;\n          partFields.forEach((partField: any) => {\n            const partFieldJson = JSON.parse(partField.val);\n            const jobIdWithPartField = partFieldJson.aggr_field;\n            const buckets = partField.timestamp.buckets;\n            const actualSeries: any[] = [];\n            buckets.forEach((timeBucket: any) => {\n              const d: Date = new Date(timeBucket.val);\n              const ts = d.getTime();\n              const actual = timeBucket.actual.buckets[0].val;\n\n              actualSeries.push([actual, ts]);\n              baseline.push(actual);\n            });\n\n            seriesList.push({\n              target: jobIdWithPartField,\n              datapoints: actualSeries,\n            });\n          });\n        }\n      });\n\n      baseline = this.getStdDev(baseline);\n\n      // Populate other metrics and find deviation from baseline\n      jobs.forEach((job: any) => {\n        if (job.val !== correlationMetric) {\n          const partFields = job.group.buckets;\n          partFields.forEach((partField: any) => {\n            const partFieldJson = JSON.parse(partField.val);\n            const jobIdWithPartField = partFieldJson.aggr_field;\n            const buckets = partField.timestamp.buckets;\n            const actualSeries: any[] = [];\n\n            let compare: any[] = [];\n            buckets.forEach((timeBucket: any) => {\n              const d: Date = new Date(timeBucket.val);\n              const ts = d.getTime();\n              const actual = timeBucket.actual.buckets[0].val;\n              compare.push(actual);\n              actualSeries.push([actual, ts]);\n            });\n\n            compare = this.getStdDev(compare);\n            const dev = this.findCorrelation(baseline, compare);\n\n            seriesList.push({\n              target: jobIdWithPartField + ': ' + dev.toFixed(3),\n              datapoints: actualSeries,\n            });\n          });\n        }\n      });\n    } else if (data.facets && data.facets.heatMapFacet) {\n      // Heatmap\n      seriesList = [];\n      const jobs = data.facets.heatMapFacet.buckets;\n      jobs.forEach((job: any) => {\n        const dayBuckets = job.Day0.buckets;\n        const seriesData: any[] = [];\n        dayBuckets.forEach((bucket: any) => {\n          if (bucket.score != null && bucket.score.score != null) {\n            const d: Date = new Date(bucket.val);\n            seriesData.push([bucket.score.score, d.getTime()]);\n          }\n        });\n        seriesList.push({\n          target: job.val,\n          datapoints: seriesData,\n        });\n      });\n\n      seriesList.sort((a: any, b: any) => {\n        let totalA = 0;\n        let totalB = 0;\n        if (a.datapoints && b.datapoints) {\n          a.datapoints.map((d: any) => {\n            totalA += d[0];\n          });\n          b.datapoints.map((d: any) => {\n            totalB += d[0];\n          });\n        } else {\n          return 0;\n        }\n\n        return totalA - totalB;\n      });\n    } else if (format === 'rawlogs' || format === 'slowQueries') {\n      // Table\n      const columns: any[] = [];\n      const rows: any[] = [];\n      seriesList = {};\n      let index = 0;\n      if (data && data.response && data.response.docs) {\n        data.response.docs.forEach((item: any) => {\n          const row = [];\n          for (const property in item) {\n            // Set columns\n            if (index === 0 && item.hasOwnProperty(property)) {\n              if (property === timeField) {\n                columns.unshift({ type: 'time', text: 'Time' });\n              } else {\n                columns.push({ type: 'string', text: property });\n              }\n            }\n            // Set rows\n            if (property === timeField) {\n              const d: Date = new Date(item[timeField]);\n\n              const ts = d.getTime(); //.unix() * 1000;\n              row.unshift(ts);\n            } else {\n              row.push(item[property]);\n            }\n          }\n          index++;\n          rows.push(row);\n        });\n      }\n      seriesList = [\n        {\n          type: 'table',\n          columns: columns,\n          rows: rows,\n        },\n      ];\n    } else if (format === 'count') {\n      seriesList = [];\n      const numResults = data && data.response && data.response.numFound ? data.response.numFound : 0;\n      seriesList.push({\n        target: 'Number of docs',\n        datapoints: [[numResults, '']],\n      });\n    } else if (format === 'chart') {\n      // Charts\n      seriesList = [];\n      data.response.docs.forEach((item: any) => {\n        for (const property in item) {\n          if (item.hasOwnProperty(property) && property !== timeField) {\n            if (typeof series[property] === 'undefined') {\n              series[property] = [];\n            }\n            const date = new Date(item[timeField]);\n            const ts = date.getTime();\n            series[property].push([item[property] || 0, ts]);\n          }\n        }\n      });\n      for (const property in series) {\n        seriesList.push({\n          target: property,\n          datapoints: series[property].sort((a: any, b: any) => {\n            return a[1] - b[1];\n          }),\n        });\n      }\n    }\n\n    if (!seriesList) {\n      seriesList = [];\n    }\n    return {\n      data: seriesList,\n    };\n  }\n\n  static mapToTextValue(result: any) {\n    if (result.data && result.data.collections) {\n      return result.data.collections.map((collection: string) => {\n        return {\n          text: collection,\n          value: collection,\n        };\n      });\n    }\n    if (result.data && result.data.facet_counts) {\n      const ar = [];\n      for (const key in result.data.facet_counts.facet_fields) {\n        if (result.data.facet_counts.facet_fields.hasOwnProperty(key)) {\n          const array = result.data.facet_counts.facet_fields[key];\n          for (let i = 0; i < array.length; i += 2) {\n            // take every second element\n            ar.push({\n              text: array[i],\n              expandable: false,\n            });\n          }\n        }\n      }\n      return ar;\n    }\n    if (result.data) {\n      return result.data\n        .split('\\n')[0]\n        .split(',')\n        .map((field: string) => {\n          return {\n            text: field,\n            value: field,\n          };\n        });\n    }\n  }\n\n  static getStdDev(series: number[]) {\n    const min = Math.min(...series);\n    const max = Math.max(...series);\n\n    series = series.map(b => {\n      return (b - min) / (max - min);\n    });\n\n    return series;\n  }\n\n  static findCorrelation(x: any, y: any) {\n    let sumX = 0,\n      sumY = 0,\n      sumXY = 0,\n      sumX2 = 0,\n      sumY2 = 0;\n    const minLength = (x.length = y.length = Math.min(x.length, y.length)),\n      reduce = (xi: any, idx: any) => {\n        const yi = y[idx];\n        sumX += xi;\n        sumY += yi;\n        sumXY += xi * yi;\n        sumX2 += xi * xi;\n        sumY2 += yi * yi;\n      };\n    x.forEach(reduce);\n    return (minLength * sumXY - sumX * sumY) / Math.sqrt((minLength * sumX2 - sumX * sumX) * (minLength * sumY2 - sumY * sumY));\n  }\n\n  static queryBuilder(query: string) {\n    return query\n      .replace(/{/g, '(')\n      .replace(/}/g, ')')\n      .replace(/,/g, ' OR ');\n  }\n}\n","/*\n *\n *  Copyright (C) 2019 Bolt Analytics Corporation\n *\n *      Licensed under the Apache License, Version 2.0 (the \"License\");\n *      you may not use this file except in compliance with the License.\n *      You may obtain a copy of the License at\n *\n *          http://www.apache.org/licenses/LICENSE-2.0\n *\n *      Unless required by applicable law or agreed to in writing, software\n *      distributed under the License is distributed on an \"AS IS\" BASIS,\n *      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *      See the License for the specific language governing permissions and\n *      limitations under the License.\n *\n */\n\nimport { DataSourcePlugin } from '@grafana/ui';\n\nimport { BoltDatasource } from './datasource';\n\nimport { BoltQueryEditor } from './queryEditor';\nimport { BoltOptions, BoltQuery } from './types';\n\nexport class BoltConfigControl {\n  static templateUrl = 'partials/config.html';\n}\n\nexport const plugin = new DataSourcePlugin<BoltDatasource, BoltQuery, BoltOptions>(BoltDatasource)\n  .setConfigCtrl(BoltConfigControl)\n  .setQueryEditor(BoltQueryEditor);\n","/*\n *\n *  Copyright (C) 2019 Bolt Analytics Corporation\n *\n *      Licensed under the Apache License, Version 2.0 (the \"License\");\n *      you may not use this file except in compliance with the License.\n *      You may obtain a copy of the License at\n *\n *          http://www.apache.org/licenses/LICENSE-2.0\n *\n *      Unless required by applicable law or agreed to in writing, software\n *      distributed under the License is distributed on an \"AS IS\" BASIS,\n *      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *      See the License for the specific language governing permissions and\n *      limitations under the License.\n *\n */\n\nimport React, { PureComponent } from 'react';\n\n// Types\nimport { BoltDatasource } from './datasource';\nimport { BoltQuery, BoltOptions } from './types';\n\nimport { FormField, QueryEditorProps, FormLabel } from '@grafana/ui';\n\nimport _ from 'lodash';\n\ntype Props = QueryEditorProps<BoltDatasource, BoltQuery, BoltOptions>;\n\ninterface State extends BoltQuery {}\n\nexport class BoltQueryEditor extends PureComponent<Props, State> {\n  query: BoltQuery;\n\n  constructor(props: Props) {\n    super(props);\n\n    const { query } = this.props;\n    this.query = query;\n\n    this.state = {\n      ...this.state,\n      query: query.query,\n      collection: query.collection,\n      fl: query.fl,\n      queryType: query.queryType || 'chart',\n      numRows: query.numRows || 100,\n      start: query.start || 0,\n      facetQuery: query.facetQuery,\n      sortField: query.sortField,\n      sortOrder: query.sortOrder,\n      rexQuery:\n        query.rexQuery ||\n        '\\\\s*.*\\\\s*\\\\[c\\\\:(.*)\\\\ss\\\\:(.*)\\\\sr\\\\:(.*)\\\\sx\\\\:(.*)\\\\]\\\\s*o.a.s.c.S.SlowRequest.*path=(.*)\\\\s*' +\n          'params=\\\\{(.*)\\\\}\\\\s*.*hits=(.*)\\\\s*status.*QTime=(.*)',\n      rexOutFields: query.rexOutFields || 'collection,shard,replica,core,handler,params,hits,qtime',\n      baseMetric: query.baseMetric,\n    };\n\n    const { onChange } = this.props;\n    onChange({\n      ...this.props.query,\n      ...this.state,\n    });\n  }\n\n  onFieldValueChange = (event: any, _name?: string) => {\n    const name = _name ? _name : event.target.name;\n    const value = event.target.value;\n\n    this.setState({\n      ...this.state,\n      [name]: value,\n    });\n\n    const { onChange } = this.props;\n    onChange({\n      ...this.props.query,\n      [name]: value,\n    });\n  };\n\n  render() {\n    const chartTypes = [\n      { value: 'chart', displayName: 'Chart' },\n      { value: 'rawlogs', displayName: 'Raw Logs' },\n      { value: 'slowQueries', displayName: 'Slow Queries' },\n      { value: 'count', displayName: 'Count' },\n      {\n        displayName: 'Aggregated Anomalies',\n        value: 'aggAnomaly',\n      },\n      {\n        displayName: 'Individual Anomalies',\n        value: 'indvAnomaly',\n      },\n      {\n        displayName: 'Correlation',\n        value: 'correlation',\n      },\n    ];\n    const { query, collection, fl, queryType, numRows, start, sortField, sortOrder, rexQuery, rexOutFields, baseMetric } = this.state;\n    const labelWidth = 8;\n\n    return (\n      <div>\n        <div className=\"gf-form-inline\">\n          <div className=\"gf-form\">\n            <FormLabel width={labelWidth}>Type</FormLabel>\n            <select\n              value={queryType}\n              onChange={(event: any) => {\n                this.onFieldValueChange(event, 'queryType');\n                // this.resetFields();\n              }}\n            >\n              {chartTypes.sort().map(c => {\n                return <option value={c.value}>{c.displayName}</option>;\n              })}\n            </select>\n          </div>\n          <div className=\"gf-form\">\n            <FormField\n              label=\"Query\"\n              type=\"text\"\n              value={query}\n              labelWidth={labelWidth}\n              width={4}\n              name=\"query\"\n              onChange={this.onFieldValueChange}\n            ></FormField>\n          </div>\n          {queryType !== 'aggAnomaly' && queryType !== 'indvAnomaly' && queryType !== 'correlation' && (\n            <div className=\"gf-form\">\n              <FormField\n                label=\"Collection\"\n                type=\"text\"\n                value={collection}\n                labelWidth={labelWidth}\n                width={4}\n                name=\"collection\"\n                onChange={this.onFieldValueChange}\n              ></FormField>\n            </div>\n          )}\n          {queryType === 'correlation' && (\n            <div className=\"gf-form\">\n              <FormField\n                label=\"Base Metric\"\n                type=\"text\"\n                value={baseMetric}\n                labelWidth={labelWidth}\n                width={4}\n                name=\"baseMetric\"\n                onChange={this.onFieldValueChange}\n              ></FormField>\n            </div>\n          )}\n        </div>\n        {(queryType === 'chart' || queryType === 'rawlogs' || queryType === 'slowQueries') && (\n          <div className=\"gf-form-inline\">\n            {(queryType === 'rawlogs' || queryType === 'slowQueries') && (\n              <div>\n                <div className=\"gf-form\">\n                  <FormField\n                    label=\"Sort\"\n                    type=\"text\"\n                    value={sortField}\n                    labelWidth={labelWidth}\n                    width={4}\n                    name=\"sortField\"\n                    onChange={this.onFieldValueChange}\n                  ></FormField>\n                </div>\n                <div className=\"gf-form\">\n                  <FormField\n                    label=\"Order\"\n                    type=\"text\"\n                    value={sortOrder}\n                    labelWidth={labelWidth}\n                    width={4}\n                    name=\"sortOrder\"\n                    onChange={this.onFieldValueChange}\n                  ></FormField>\n                </div>\n              </div>\n            )}\n\n            <div className=\"gf-form\">\n              <FormField\n                label=\"Out Fields\"\n                type=\"text\"\n                value={fl}\n                labelWidth={labelWidth}\n                width={4}\n                name=\"fl\"\n                onChange={this.onFieldValueChange}\n              ></FormField>\n            </div>\n            {(queryType === 'rawlogs' || queryType === 'slowQueries') && (\n              <div className=\"gf-form\">\n                <FormField\n                  label=\"Number of rows\"\n                  labelWidth={10}\n                  type=\"text\"\n                  value={numRows}\n                  width={6}\n                  name=\"numRows\"\n                  onChange={this.onFieldValueChange}\n                ></FormField>\n              </div>\n            )}\n            {(queryType === 'rawlogs' || queryType === 'slowQueries') && (\n              <div className=\"gf-form\">\n                <FormField\n                  label=\"Start page\"\n                  type=\"text\"\n                  value={start}\n                  labelWidth={labelWidth}\n                  width={4}\n                  name=\"start\"\n                  onChange={this.onFieldValueChange}\n                ></FormField>\n              </div>\n            )}\n          </div>\n        )}\n        {queryType === 'slowQueries' && (\n          <div className=\"gf-form-inline\">\n            <div className=\"gf-form\">\n              <FormField\n                label=\"Rex Query\"\n                type=\"text\"\n                value={rexQuery}\n                labelWidth={labelWidth}\n                width={4}\n                name=\"rexQuery\"\n                onChange={this.onFieldValueChange}\n              ></FormField>\n            </div>\n            <div className=\"gf-form\">\n              <FormField\n                label=\"Output Fields\"\n                type=\"text\"\n                value={rexOutFields}\n                labelWidth={labelWidth}\n                width={4}\n                name=\"rexOutFields\"\n                onChange={this.onFieldValueChange}\n              ></FormField>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__grafana_runtime__;","module.exports = __WEBPACK_EXTERNAL_MODULE__grafana_ui__;","module.exports = __WEBPACK_EXTERNAL_MODULE_lodash__;","module.exports = __WEBPACK_EXTERNAL_MODULE_react__;"],"sourceRoot":""}

